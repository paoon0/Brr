## 学士研究の過程で作成したコンテナアプリケーションの一部  
kubernetesやIstioを実際に利用してみたいという想いから,Todoリスト管理アプリをイメージして実装  
NginxがWebサーバの役割を担っており,静的ファイルを提供やAPIとの通信をプロキシしている  
APIはタスクの管理や認証に関するサービスを提供し,MySQLともやり取りを行う  
トラフィックの流れとしては  
リクエスト→Nginx→タスク管理用API→mysql  

_rolegetdep以外の[yamlファイル]のみでアプリケーションは起動するはず_  
APIサーバやSQL,Nginxのイメージ,.envは必須  

また認証・認可はAuth0とIstio(Istioのファイルはセキュリティ上省いている)で実装した  

##以下が主なアプリケーションを構成するファイルである  
### db-dep.yaml  
nginxイメージを利用 nginx.confは[dbconf.yaml]に記述している  
主にAPIサーバが提供するエンドポイントごとの処理が記述されている    

### fastapidep2.yaml  
自作apiサーバのイメージを利用　fastapiserverディレクトリにイメージ元のファイルを置いている  
routersでは公開するAPIを提供し,serviceで具体的なロジックを記述  
/authpointはAuth0の提供するログイン機能のcallback先となっており,ログイン後に提供されるAuthorizationcodeを用いてアクセストークンを取得するロジックが記述されている.また今回は,このアクセストークンをcookieに保存して他のページでも利用できるようにした.  
以上が完了すると/userindexに遷移してアプリケーションの画面が表示される  
また,タスクの管理に関するロジックはすべてここに記述している  

### mysql-dep.yaml  
特に捻りのないシンプルなmysqlのpod  

## 改善点  
認証ロジックとタスク管理ロジックを一つのPodにまとめてしまったせいで,ただの扱いずらいアプリケーションになってしまった.  APIをちゃんと分割すれば,確かに扱いやすいアプリケーション(いわゆるマイクロサービス)になり,責務も分散できるため,非常に便利だと感じた.   

## 総じて  
好奇心から実装に至ったものの,バックエンドをここまで実装したのは初めてだったので内部での処理やセキュリティ面に関して非常に学びが多かった.また,利用したことのない技術も多かったため楽しかった.  
またPodやServiceの基本的な技術は[Docker/Kubernetes実践コンテナ開発入門]から多く吸収した.
